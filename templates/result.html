{% extends "layout.html" %}
{% block content %}
<div class="container">
    <h1>AIæ–™ç†ç ”ç©¶å®¶</h1>
    {% if image_path %}
        <img src="{{ image_path }}" alt="Uploaded Image" width="400" class="uploaded-fridge-image"><br>
    {% endif %}

    <h2>ğŸ¥• èªè­˜ã•ã‚ŒãŸé£Ÿæ (å¿…è¦ãªã‚‰ä¿®æ­£ã—ã¦ãã ã•ã„)</h2>
    <form action="{{ url_for('generate_recipes') }}" method="POST">
        <textarea name="edited_ingredients" rows="10" style="width:100%; font-size:18px; border-radius:10px; border:2px solid #e64a19; padding:10px;">{{ ingredients }}</textarea>
        <button type="submit" class="recipe-button" style="margin-top:15px; width:100%; height:60px; font-size:22px;">ã“ã®å†…å®¹ã§ãƒ¬ã‚·ãƒ”ã‚’ä½œæˆã™ã‚‹ï¼</button>
    </form>
    
    <form action="{{ url_for('saved_recipes') }}" method="POST">
        <label for="title">ãƒ¬ã‚·ãƒ”ã®ã‚¿ã‚¤ãƒˆãƒ«:</label><br>
        <input type="text" id="title" name="title" value="æ–°ã—ã„ãƒ¬ã‚·ãƒ”" style="width:100%; font-size:18px; border-radius:10px; border:2px solid #e64a19; padding:10px;"><br><br>

        <input type="hidden" name="ingredients" value="{{ ingredients }}">
        <label for="method">ä½œã‚Šæ–¹:</label><br>
        <textarea id="method" name="method" rows="10" style="width:100%; font-size:18px; border-radius:10px; border:2px solid #e64a19; padding:10px;">{{ method_part }}</textarea><br>
        
        <input type="hidden" name="ingredients_part" value="{{ ingredients_part }}">
        <input type="hidden" name="method_part" value="{{ method_part }}">
        <button type="submit" class="recipe-button">ã“ã®ãƒ¬ã‚·ãƒ”ã‚’ä¿å­˜ã™ã‚‹ï¼</button>
    </form>


    <div class="recipe-card">
        <h2>ğŸ³ ææ¡ˆã•ã‚ŒãŸãƒ¬ã‚·ãƒ”</h2>

        <div class="ingredients-card">
            <h3 style="color:#ff7043;">ğŸ½ï¸ ææ–™</h3>
            <p style="font-size:18px; white-space: pre-wrap;">{{ ingredients_part|safe }}</p>
        </div>

        <div class="ingredients-card" style="margin-top:20px;">
            <h3 style="color:#ff7043;">ğŸ‘¨â€ğŸ³ ä½œã‚Šæ–¹</h3>
            <p style="font-size:18px; white-space: pre-wrap;">{{ method_part|safe }}</p>
        </div>
    </div>

    {% for recipe, graph in graphs.items() %}
        <h3>{{ recipe }}</h3>
        <img src="data:image/png;base64,{{ graph }}"alt="æ „é¤Šãƒãƒ©ãƒ³ã‚¹ã‚°ãƒ©ãƒ•" style="width:300px; border:2px solid #e64a19; border-radius:10px;">
    {% endfor %}
    <button onclick="history.back()" class="recipe-button">â¬… æˆ»ã‚‹</button>

</div>
{% endblock %}
